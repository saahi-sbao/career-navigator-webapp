{"version":3,"sources":["../../../../src/ai/flows/generate-avatar.ts"],"sourcesContent":["\n'use server';\n\n/**\n * @fileOverview A flow to generate a user avatar from a text prompt.\n */\n\nimport { ai } from '@/ai/genkit';\nimport { googleAI } from '@genkit-ai/google-genai';\nimport { z } from 'genkit';\n\nconst AvatarInputSchema = z.object({\n  prompt: z.string().describe('A text prompt describing the desired avatar.'),\n});\n\nconst AvatarOutputSchema = z.object({\n  imageUrl: z.string().describe('The data URI of the generated avatar image.'),\n});\n\ntype AvatarInput = z.infer<typeof AvatarInputSchema>;\ntype AvatarOutput = z.infer<typeof AvatarOutputSchema>;\n\nexport async function generateAvatar(input: AvatarInput): Promise<AvatarOutput> {\n  return generateAvatarFlow(input);\n}\n\nconst generateAvatarFlow = ai.defineFlow(\n  {\n    name: 'generateAvatarFlow',\n    inputSchema: AvatarInputSchema,\n    outputSchema: AvatarOutputSchema,\n  },\n  async (input) => {\n    const { media } = await ai.generate({\n      model: 'googleai/imagen-4.0-fast-generate-001',\n      prompt: `Generate a cute, cartoonish, circular avatar based on the following description. The background should be a simple, solid, vibrant color. Prompt: ${input.prompt}`,\n      config: {\n        responseMimeType: 'image/png',\n      },\n    });\n\n    if (!media || !media.url) {\n      throw new Error('Image generation failed.');\n    }\n\n    return {\n      imageUrl: media.url,\n    };\n  }\n);\n"],"names":[],"mappings":"qQAOA,EAAA,EAAA,CAAA,CAAA,MAEA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,oBAEA,IAAM,EAAoB,EAAA,CAAC,CAAC,MAAM,CAAC,CACjC,OAAQ,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,CAAC,+CAC9B,GAEM,EAAqB,EAAA,CAAC,CAAC,MAAM,CAAC,CAClC,SAAU,EAAA,CAAC,CAAC,MAAM,GAAG,QAAQ,CAAC,8CAChC,GAKO,eAAe,EAAe,CAAkB,EACrD,OAAO,EAAmB,EAC5B,CAEA,IAAM,EAAqB,EAAA,EAAE,CAAC,UAAU,CACtC,CACE,KAAM,qBACN,YAAa,EACb,aAAc,CAChB,EACA,MAAO,IACL,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,EAAE,CAAC,QAAQ,CAAC,CAClC,MAAO,wCACP,OAAQ,CAAC,kJAAkJ,EAAE,EAAM,MAAM,CAAA,CAAE,CAC3K,OAAQ,CACN,iBAAkB,WACpB,CACF,GAEA,GAAI,CAAC,GAAS,CAAC,EAAM,GAAG,CACtB,CADwB,KAClB,AAAI,MAAM,4BAGlB,MAAO,CACL,SAAU,EAAM,GAAG,AACrB,CACF,mCA1BoB,IAAA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA"}
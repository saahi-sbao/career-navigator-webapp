
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user within the Career Navigator application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "username": {
          "type": "string",
          "description": "The username of the user."
        },
        "email": {
            "type": "string",
            "format": "email"
        },
        "role": {
            "type": "string",
            "enum": ["Student", "Teacher", "Admin"]
        },
        "careerInterestIds": {
          "type": "array",
          "description": "References to CareerInterests. (Relationship: User 1:N CareerInterest)",
          "items": {
            "type": "string"
          }
        },
        "assessment": {
          "type": "object",
          "description": "Stores the results of the user's career assessment.",
          "properties": {
            "info": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "age": { "type": "number" },
                "school": { "type": "string" }
              }
            },
            "miScores": { "type": "object" },
            "recommendation": {
              "type": "object",
              "properties": {
                "pathway": { "type": "object" },
                "confidence": { "type": "number" }
              }
            },
            "timestamp": { "type": "string", "format": "date-time" },
            "dominantIntelligence": { "type": "string" }
          }
        }
      },
      "required": [
        "id",
        "username",
        "role"
      ]
    },
    "CareerInterest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CareerInterest",
      "type": "object",
      "description": "Represents a career interest selected by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the career interest entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N CareerInterest)"
        },
        "careerField": {
          "type": "string",
          "description": "The name or identifier of the career field."
        }
      },
      "required": [
        "id",
        "userId",
        "careerField"
      ]
    },
    "AdminUser": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AdminUser",
      "type": "object",
      "description": "Represents an administrator user with elevated privileges.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the administrator user."
        },
        "username": {
          "type": "string",
          "description": "The username of the administrator."
        }
      },
      "required": [
        "id",
        "username"
      ]
    },
    "StudyLog": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "StudyLog",
        "type": "object",
        "description": "Represents a single study session logged by a student.",
        "properties": {
          "id": { "type": "string" },
          "userId": { "type": "string" },
          "subject": { "type": "string" },
          "date": { "type": "string", "format": "date-time" },
          "duration": { "type": "number", "description": "Duration in minutes" }
        },
        "required": ["id", "userId", "subject", "date", "duration"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com",
      "phone"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Stores user profiles. Uses path-based ownership for simplified security rules."
    },
    "/users/{userId}/careerInterests/{careerInterestId}": {
      "schema": {
        "$ref": "#/entities/CareerInterest"
      },
      "description": "Stores career interests for each user. Includes denormalized 'userId' for authorization independence."
    },
    "/users/{userId}/studyLogs/{studyLogId}": {
      "schema": {
        "$ref": "#/entities/StudyLog"
      },
      "description": "Stores a user's study log entries."
    },
    "/roles_admin/{userId}": {
      "schema": {
        "$ref": "#/entities/AdminUser"
      },
      "description": "Collection to store admin users. The existence of a document grants admin privileges. Uses existence over content."
    }
  }
}
